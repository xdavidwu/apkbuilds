# Maintainer: xdavidwu <xdavidwuph@gmail.com>
pkgname=nvimpager
pkgver=0.11.0
pkgrel=0
pkgdesc="Use nvim as a pager to view manpages, diffs, etc with nvim's syntax highlighting"
url="https://github.com/lucc/nvimpager"
arch="all"
license="BSD-2-Clause"
depends="neovim cmd:tput cmd:ps"
makedepends="scdoc"
checkdepends="lua-busted lua5.1"
install=""
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/lucc/nvimpager/archive/refs/tags/v$pkgver.tar.gz"
options="!check" # needs a tty

build() {
	make PREFIX=/usr nvimpager.configured nvimpager.1
}

check() {
	make test
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" install
}

sha512sums="
4ab17df28e21f872a5cbf10df0dda1e8feacc26cc79a24b1db18a95ec9c6884c5da265bf6f2161d40da9ae730f8a5b0b6ab3721eb2efadb52bd2f19cbe16eb66  nvimpager-0.11.0.tar.gz
"
