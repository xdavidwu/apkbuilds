# Maintainer: xdavidwu <xdavidwuph@gmail.com>
pkgname=nvimpager
pkgver=0.12.0
pkgrel=0
pkgdesc="Use nvim as a pager to view manpages, diffs, etc with nvim's syntax highlighting"
url="https://github.com/lucc/nvimpager"
arch="all"
license="BSD-2-Clause"
depends="neovim cmd:tput cmd:ps"
makedepends="scdoc"
checkdepends="lua-busted lua5.1"
install=""
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/lucc/nvimpager/archive/refs/tags/v$pkgver.tar.gz"
options="!check" # needs a tty

build() {
	make PREFIX=/usr nvimpager.configured nvimpager.1
}

check() {
	make test
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" install
}

sha512sums="
a1b67aafdb73c5baa96cf0d682b1fa7ac7f39f58d6ce50f9875b1f9815dfce04921ffdd748552f07279cb9cc6b5c700c4aa43b7755952ce7993362b4c664e2de  nvimpager-0.12.0.tar.gz
"
